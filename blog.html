<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blog — Christopher Austin · On the Fairway</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=Crimson+Pro:wght@300;400&display=swap" rel="stylesheet">
<style>
  :root {
    --green-deep: #1a3325;
    --green-mid: #2d5a3d;
    --green-light: #4a7c5e;
    --gold: #b8965a;
    --gold-light: #d4b07a;
    --cream: #f5f0e8;
    --cream-dark: #ede5d4;
    --white: #fdfaf5;
    --text-dark: #1c1a16;
    --text-mid: #4a4540;
    --text-light: #7a7068;
    --border: rgba(184,150,90,0.25);
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  html { scroll-behavior:smooth; }
  body { background:var(--white); color:var(--text-dark); font-family:'Crimson Pro',Georgia,serif; font-size:18px; line-height:1.7; overflow-x:hidden; }

  /* ── NAV ── */
  nav {
    position:fixed; top:0; left:0; right:0; z-index:100;
    background:rgba(26,51,37,0.97); backdrop-filter:blur(8px);
    border-bottom:1px solid rgba(184,150,90,0.3);
    padding:0 4rem; display:flex; align-items:center; justify-content:space-between; height:64px;
  }
  .nav-logo { font-family:'Playfair Display',serif; font-size:1.05rem; color:var(--gold-light); letter-spacing:0.06em; text-decoration:none; font-style:italic; }
  .nav-links { display:flex; gap:2.5rem; list-style:none; }
  .nav-links a { color:rgba(245,240,232,0.72); text-decoration:none; font-family:'Cormorant Garamond',serif; font-size:0.82rem; letter-spacing:0.14em; text-transform:uppercase; transition:color 0.25s; }
  .nav-links a:hover, .nav-links a.active { color:var(--gold-light); }

  /* ── PAGE HEADER ── */
  .page-header {
    background:linear-gradient(160deg, #0d1f14 0%, #152a1e 45%, #1a3325 100%);
    padding:7rem 0 4rem;
    position:relative;
    overflow:hidden;
  }
  .page-header::before {
    content:'';
    position:absolute; inset:0;
    background:radial-gradient(ellipse at 20% 80%, rgba(74,124,94,0.18) 0%, transparent 55%),
               radial-gradient(ellipse at 80% 20%, rgba(184,150,90,0.07) 0%, transparent 50%);
  }
  .page-header .container { position:relative; z-index:2; }
  .page-eyebrow {
    display:inline-flex; align-items:center; gap:0.7rem;
    font-family:'Cormorant Garamond',serif; font-size:0.72rem; letter-spacing:0.28em; text-transform:uppercase; color:var(--gold); margin-bottom:1rem;
  }
  .page-eyebrow::before,.page-eyebrow::after { content:''; display:block; width:28px; height:1px; background:var(--gold); opacity:0.55; }
  .page-title {
    font-family:'Playfair Display',serif;
    font-size:clamp(2.2rem,5vw,4rem);
    color:var(--cream); line-height:1.1;
    margin-bottom:0.75rem;
  }
  .page-title em { font-style:italic; color:var(--gold-light); }
  .page-subtitle {
    font-family:'Cormorant Garamond',serif; font-size:1.1rem;
    color:rgba(245,240,232,0.5); font-style:italic;
  }

  /* ── COMMONS ── */
  .container { max-width:1100px; margin:0 auto; padding:0 2rem; }
  .sec-label { font-family:'Cormorant Garamond',serif; font-size:0.67rem; letter-spacing:0.3em; text-transform:uppercase; color:var(--gold); margin-bottom:0.75rem; display:flex; align-items:center; gap:0.75rem; }
  .sec-label::after { content:''; display:block; width:30px; height:1px; background:var(--gold); opacity:0.5; }
  .gold-rule { width:44px; height:2px; background:var(--gold); margin-bottom:2rem; }

  /* ── BLOG LIST SECTION ── */
  .blog-section { padding:5rem 0 6rem; }
  .blog-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:3rem; flex-wrap:wrap; gap:1rem; }
  .blog-count { font-family:'Cormorant Garamond',serif; font-size:0.85rem; letter-spacing:0.1em; color:var(--text-light); font-style:italic; }

  /* ── BLOG CARD ── */
  .blog-list { display:flex; flex-direction:column; gap:0; }
  .blog-card {
    background:var(--white);
    border:1px solid var(--border);
    border-bottom:none;
    padding:2rem 2.5rem;
    display:grid;
    grid-template-columns:1fr auto;
    gap:1.5rem;
    align-items:start;
    cursor:pointer;
    text-decoration:none;
    color:inherit;
    transition:background 0.2s, border-color 0.2s;
    position:relative;
  }
  .blog-card:first-child { border-top-left-radius:2px; border-top-right-radius:2px; }
  .blog-card:last-child { border-bottom:1px solid var(--border); border-bottom-left-radius:2px; border-bottom-right-radius:2px; }
  .blog-card:hover { background:var(--cream); border-color:rgba(184,150,90,0.45); }
  .blog-card:hover + .blog-card { border-top-color:rgba(184,150,90,0.45); }

  .blog-card-meta {
    font-family:'Cormorant Garamond',serif; font-size:0.72rem; letter-spacing:0.18em;
    text-transform:uppercase; color:var(--gold); margin-bottom:0.5rem;
    display:flex; align-items:center; gap:0.75rem;
  }
  .meta-dot { width:3px; height:3px; border-radius:50%; background:var(--gold); opacity:0.5; }

  .blog-card-title {
    font-family:'Playfair Display',serif; font-size:1.35rem;
    color:var(--green-deep); line-height:1.25; margin-bottom:0.6rem;
    transition:color 0.2s;
  }
  .blog-card:hover .blog-card-title { color:var(--green-mid); }

  .blog-card-excerpt {
    font-family:'Cormorant Garamond',serif; font-size:1rem;
    color:var(--text-mid); line-height:1.7;
    display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
  }

  .blog-card-arrow {
    width:36px; height:36px; border:1px solid var(--border);
    display:flex; align-items:center; justify-content:center;
    color:var(--gold); font-size:1rem; margin-top:0.25rem;
    transition:all 0.2s; flex-shrink:0;
    align-self:center;
  }
  .blog-card:hover .blog-card-arrow { background:var(--green-deep); border-color:var(--green-deep); color:var(--gold-light); }

  /* Empty state */
  .empty-state {
    text-align:center; padding:5rem 2rem;
    border:1px solid var(--border);
  }
  .empty-state-icon { font-size:2.5rem; margin-bottom:1.5rem; opacity:0.35; }
  .empty-state h3 { font-family:'Playfair Display',serif; font-size:1.5rem; color:var(--green-deep); margin-bottom:0.75rem; }
  .empty-state p { font-family:'Cormorant Garamond',serif; font-size:1rem; color:var(--text-light); }
  .empty-state a { color:var(--gold); text-decoration:none; }
  .empty-state a:hover { text-decoration:underline; }

  /* ── PAGINATION ── */
  .pagination {
    display:flex; align-items:center; justify-content:center;
    gap:0; margin-top:3rem;
    border:1px solid var(--border);
    width:fit-content; margin-inline:auto;
  }
  .pg-btn {
    background:none; border:none; cursor:pointer;
    font-family:'Cormorant Garamond',serif; font-size:0.82rem; letter-spacing:0.1em;
    color:var(--text-light); padding:0.65rem 1.1rem;
    border-right:1px solid var(--border);
    transition:all 0.2s; min-width:44px; text-align:center;
    display:flex; align-items:center; justify-content:center;
  }
  .pg-btn:last-child { border-right:none; }
  .pg-btn.active { background:var(--green-deep); color:var(--gold-light); }
  .pg-btn:hover:not(.active):not(:disabled) { background:var(--cream); color:var(--green-mid); }
  .pg-btn:disabled { opacity:0.35; cursor:default; }
  .pg-btn.pg-arrow { font-size:1rem; color:var(--gold); }

  /* ── FOOTER ── */
  footer { background:var(--green-deep); padding:3rem 0; border-top:1px solid rgba(184,150,90,0.18); }
  .footer-inner { display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:1.5rem; }
  .footer-logo { font-family:'Playfair Display',serif; font-size:1rem; color:var(--gold-light); font-style:italic; }
  .footer-info { font-family:'Cormorant Garamond',serif; font-size:0.8rem; color:rgba(245,240,232,0.38); letter-spacing:0.08em; }

  @media(max-width:900px){
    nav { padding:0 1.5rem; }
    .nav-links { display:none; }
    .blog-card { grid-template-columns:1fr; gap:1rem; }
    .blog-card-arrow { display:none; }
  }
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <a href="index.html" class="nav-logo">Christopher Austin · On the Fairway</a>
  <ul class="nav-links">
    <li><a href="index.html#home-club">Home Club</a></li>
    <li><a href="index.html#rounds">Rounds</a></li>
    <li><a href="index.html#goals">2026 Goals</a></li>
    <li><a href="index.html#gallery">Gallery</a></li>
    <li><a href="index.html#about">The Game</a></li>
    <li><a href="blog.html" class="active">Blog</a></li>
  </ul>
</nav>

<!-- PAGE HEADER -->
<div class="page-header">
  <div class="container">
    <div class="page-eyebrow">Christopher Austin · On the Fairway</div>
    <h1 class="page-title">From the <em>Fairway</em></h1>
    <p class="page-subtitle">Thoughts on the game, the grind, and everything in between.</p>
  </div>
</div>

<!-- BLOG LIST -->
<section class="blog-section">
  <div class="container">
    <div class="blog-header">
      <div>
        <div class="sec-label">Latest Posts</div>
        <div class="gold-rule"></div>
      </div>
      <div class="blog-count" id="blog-count"></div>
    </div>
    <div id="blog-list" class="blog-list"></div>
    <div id="pagination" class="pagination" style="display:none;"></div>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="container">
    <div class="footer-inner">
      <div class="footer-logo">Christopher Austin · On the Fairway</div>
      <div class="footer-info">Hopedale Country Club · GHIN 1234567</div>
    </div>
  </div>
</footer>

<script>
const PER_PAGE = 10;
let currentPage = 1;

function getPosts() {
  try {
    return JSON.parse(localStorage.getItem('golf_blog_posts') || '[]')
      .filter(p => p.published)
      .sort((a, b) => new Date(b.publishedAt) - new Date(a.publishedAt));
  } catch { return []; }
}

function formatDate(iso) {
  const d = new Date(iso);
  return d.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
}

function excerpt(body, max = 180) {
  const text = body.replace(/<[^>]*>/g, '').replace(/\n+/g, ' ').trim();
  return text.length > max ? text.slice(0, max).replace(/\s+\S*$/, '') + '…' : text;
}

function renderPosts(posts, page) {
  const list = document.getElementById('blog-list');
  const pg = document.getElementById('pagination');
  const count = document.getElementById('blog-count');
  const total = posts.length;
  const totalPages = Math.ceil(total / PER_PAGE);
  const slice = posts.slice((page - 1) * PER_PAGE, page * PER_PAGE);

  count.textContent = total === 0 ? '' : total === 1 ? '1 post' : `${total} posts`;

  if (slice.length === 0) {
    list.innerHTML = `
      <div class="empty-state">
        <div class="empty-state-icon">⛳</div>
        <h3>No posts yet</h3>
        <p>Check back soon — posts from the fairway are on their way.<br>
           <a href="admin.html">Write the first post →</a></p>
      </div>`;
    pg.style.display = 'none';
    return;
  }

  list.innerHTML = slice.map(p => `
    <a class="blog-card" href="post.html?id=${encodeURIComponent(p.id)}">
      <div>
        <div class="blog-card-meta">
          <span>${formatDate(p.publishedAt)}</span>
          <span class="meta-dot"></span>
          <span>${escHtml(p.author)}</span>
        </div>
        <div class="blog-card-title">${escHtml(p.title)}</div>
        <div class="blog-card-excerpt">${escHtml(excerpt(p.body))}</div>
      </div>
      <div class="blog-card-arrow">→</div>
    </a>
  `).join('');

  // Pagination
  if (totalPages <= 1) {
    pg.style.display = 'none';
    return;
  }
  pg.style.display = 'flex';
  let html = `<button class="pg-btn pg-arrow" onclick="goPage(${page-1})" ${page===1?'disabled':''}>←</button>`;
  for (let i = 1; i <= totalPages; i++) {
    html += `<button class="pg-btn ${i===page?'active':''}" onclick="goPage(${i})">${i}</button>`;
  }
  html += `<button class="pg-btn pg-arrow" onclick="goPage(${page+1})" ${page===totalPages?'disabled':''}>→</button>`;
  pg.innerHTML = html;
}

function goPage(p) {
  const posts = getPosts();
  const totalPages = Math.ceil(posts.length / PER_PAGE);
  if (p < 1 || p > totalPages) return;
  currentPage = p;
  renderPosts(posts, currentPage);
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function escHtml(s) {
  return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

// Initial render
renderPosts(getPosts(), currentPage);
</script>
</body>
</html>
